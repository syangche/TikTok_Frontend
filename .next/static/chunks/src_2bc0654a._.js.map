{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonamyangchen/Desktop/TikTok_Frontend/src/lib/api-config.js.js"],"sourcesContent":["// src/lib/api-config.js\nimport axios from 'axios';\n\n// Create axios instance with baseURL\nconst apiClient = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor for adding authorization\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;AAKb;AAJX;;AAEA,qCAAqC;AACrC,MAAM,YAAY,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC7B,SAAS,iEAAmC;IAC5C,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,+CAA+C;AAC/C,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACrD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/sonamyangchen/Desktop/TikTok_Frontend/src/app/upload/page.jsx"],"sourcesContent":["// In src/app/upload/page.jsx\n'use client';\n\nimport { useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '../../contexts/authContext';\nimport toast from 'react-hot-toast';\nimport { FaCloudUploadAlt, FaSpinner } from 'react-icons/fa';\nimport apiClient from '../../lib/api-config.js';\n\nconst UploadPage = () => {\n  const { isAuthenticated } = useAuth();\n  const router = useRouter();\n  const [videoFile, setVideoFile] = useState(null);\n  const [thumbnailFile, setThumbnailFile] = useState(null);\n  const [videoPreview, setVideoPreview] = useState(null);\n  const [thumbnailPreview, setThumbnailPreview] = useState(null);\n  const [caption, setCaption] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const videoInputRef = useRef(null);\n  const thumbnailInputRef = useRef(null);\n\n  // Redirect if not authenticated\n  if (!isAuthenticated) {\n    router.push('/');\n    return null;\n  }\n\n  const handleVideoChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('video/')) {\n      toast.error('Please select a video file');\n      return;\n    }\n\n    if (file.size > 100 * 1024 * 1024) {\n      toast.error('File size too large (max 100MB)');\n      return;\n    }\n\n    setVideoFile(file);\n    setVideoPreview(URL.createObjectURL(file));\n  };\n\n  const handleThumbnailChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (!file.type.startsWith('image/')) {\n      toast.error('Please select an image file for the thumbnail');\n      return;\n    }\n\n    setThumbnailFile(file);\n    setThumbnailPreview(URL.createObjectURL(file));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!videoFile) {\n      toast.error('Please select a video to upload');\n      return;\n    }\n\n    if (!caption.trim()) {\n      toast.error('Please add a caption');\n      return;\n    }\n\n    try {\n      setUploading(true);\n\n      const formData = new FormData();\n      formData.append('video', videoFile);\n      if (thumbnailFile) {\n        formData.append('thumbnail', thumbnailFile);\n      }\n      formData.append('caption', caption);\n\n      const response = await apiClient.post('/videos', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      toast.success('Video uploaded successfully!');\n      router.push('/');\n    } catch (error) {\n      console.error('Upload error:', error);\n      toast.error(error.response?.data?.message || 'Failed to upload video');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-4\">\n      <h1 className=\"mb-6 text-2xl font-bold\">Upload Video</h1>\n\n      <div className=\"rounded-lg border border-gray-200 p-6\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {/* Video upload area */}\n            <div className=\"flex flex-col\">\n              <h2 className=\"text-lg font-semibold mb-2\">Video</h2>\n              {videoPreview ? (\n                <div className=\"mb-4 aspect-video w-full overflow-hidden rounded-lg bg-black\">\n                  <video\n                    src={videoPreview}\n                    className=\"h-full w-full object-contain\"\n                    controls\n                  />\n                </div>\n              ) : (\n                <div\n                  onClick={() => videoInputRef.current?.click()}\n                  className=\"flex aspect-video w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100\"\n                >\n                  <FaCloudUploadAlt size={48} className=\"mb-2 text-gray-400\" />\n                  <p className=\"text-center text-gray-500\">\n                    Click to upload a video\n                    <br />\n                    <span className=\"text-sm\">MP4 or WebM (max 100MB)</span>\n                  </p>\n                </div>\n              )}\n              <input\n                type=\"file\"\n                ref={videoInputRef}\n                onChange={handleVideoChange}\n                accept=\"video/*\"\n                className=\"hidden\"\n              />\n              {videoFile && (\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Selected: {videoFile.name}\n                </p>\n              )}\n\n              {/* Thumbnail upload area */}\n              <h2 className=\"text-lg font-semibold mb-2 mt-6\">Thumbnail (Optional)</h2>\n              {thumbnailPreview ? (\n                <div className=\"mb-4 aspect-video w-full overflow-hidden rounded-lg bg-gray-100\">\n                  <img\n                    src={thumbnailPreview}\n                    alt=\"Thumbnail preview\"\n                    className=\"h-full w-full object-contain\"\n                  />\n                </div>\n              ) : (\n                <div\n                  onClick={() => thumbnailInputRef.current?.click()}\n                  className=\"flex aspect-video w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100\"\n                >\n                  <FaCloudUploadAlt size={36} className=\"mb-2 text-gray-400\" />\n                  <p className=\"text-center text-gray-500\">\n                    Click to upload a thumbnail\n                    <br />\n                    <span className=\"text-sm\">JPG, PNG or GIF</span>\n                  </p>\n                </div>\n              )}\n              <input\n                type=\"file\"\n                ref={thumbnailInputRef}\n                onChange={handleThumbnailChange}\n                accept=\"image/*\"\n                className=\"hidden\"\n              />\n              {thumbnailFile && (\n                <p className=\"mt-2 text-sm text-gray-500\">\n                  Selected: {thumbnailFile.name}\n                </p>\n              )}\n            </div>\n\n            {/* Video details */}\n            <div>\n              <div className=\"mb-4\">\n                <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n                  Caption\n                </label>\n                <textarea\n                  value={caption}\n                  onChange={(e) => setCaption(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 p-2\"\n                  rows=\"4\"\n                  placeholder=\"What's this video about?\"\n                  maxLength=\"150\"\n                ></textarea>\n                <p className=\"mt-1 text-right text-xs text-gray-500\">\n                  {caption.length}/150\n                </p>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={uploading || !videoFile}\n                className=\"w-full rounded-lg bg-blue-500 py-3 text-white hover:bg-blue-600 disabled:bg-blue-300\"\n              >\n                {uploading ? (\n                  <span className=\"flex items-center justify-center\">\n                    <FaSpinner className=\"mr-2 animate-spin\" /> Uploading...\n                  </span>\n                ) : (\n                  'Post'\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadPage;"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAG7B;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,MAAM,aAAa;;IACjB,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAClC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAC7B,MAAM,oBAAoB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAEjC,gCAAgC;IAChC,IAAI,CAAC,iBAAiB;QACpB,OAAO,IAAI,CAAC;QACZ,OAAO;IACT;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QAC9B,IAAI,CAAC,MAAM;QAEX,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;YACnC,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,IAAI,KAAK,IAAI,GAAG,MAAM,OAAO,MAAM;YACjC,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,aAAa;QACb,gBAAgB,IAAI,eAAe,CAAC;IACtC;IAEA,MAAM,wBAAwB,CAAC;QAC7B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QAC9B,IAAI,CAAC,MAAM;QAEX,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;YACnC,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,iBAAiB;QACjB,oBAAoB,IAAI,eAAe,CAAC;IAC1C;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,WAAW;YACd,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,IAAI;YACF,aAAa;YAEb,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,SAAS;YACzB,IAAI,eAAe;gBACjB,SAAS,MAAM,CAAC,aAAa;YAC/B;YACA,SAAS,MAAM,CAAC,WAAW;YAE3B,MAAM,WAAW,MAAM,oIAAA,CAAA,UAAS,CAAC,IAAI,CAAC,WAAW,UAAU;gBACzD,SAAS;oBACP,gBAAgB;gBAClB;YACF;YAEA,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;YACd,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,MAAM,QAAQ,EAAE,MAAM,WAAW;QAC/C,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAK,UAAU;8BACd,cAAA,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAA6B;;;;;;oCAC1C,6BACC,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,KAAK;4CACL,WAAU;4CACV,QAAQ;;;;;;;;;;6DAIZ,6LAAC;wCACC,SAAS,IAAM,cAAc,OAAO,EAAE;wCACtC,WAAU;;0DAEV,6LAAC,iJAAA,CAAA,mBAAgB;gDAAC,MAAM;gDAAI,WAAU;;;;;;0DACtC,6LAAC;gDAAE,WAAU;;oDAA4B;kEAEvC,6LAAC;;;;;kEACD,6LAAC;wDAAK,WAAU;kEAAU;;;;;;;;;;;;;;;;;;kDAIhC,6LAAC;wCACC,MAAK;wCACL,KAAK;wCACL,UAAU;wCACV,QAAO;wCACP,WAAU;;;;;;oCAEX,2BACC,6LAAC;wCAAE,WAAU;;4CAA6B;4CAC7B,UAAU,IAAI;;;;;;;kDAK7B,6LAAC;wCAAG,WAAU;kDAAkC;;;;;;oCAC/C,iCACC,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,KAAK;4CACL,KAAI;4CACJ,WAAU;;;;;;;;;;6DAId,6LAAC;wCACC,SAAS,IAAM,kBAAkB,OAAO,EAAE;wCAC1C,WAAU;;0DAEV,6LAAC,iJAAA,CAAA,mBAAgB;gDAAC,MAAM;gDAAI,WAAU;;;;;;0DACtC,6LAAC;gDAAE,WAAU;;oDAA4B;kEAEvC,6LAAC;;;;;kEACD,6LAAC;wDAAK,WAAU;kEAAU;;;;;;;;;;;;;;;;;;kDAIhC,6LAAC;wCACC,MAAK;wCACL,KAAK;wCACL,UAAU;wCACV,QAAO;wCACP,WAAU;;;;;;oCAEX,+BACC,6LAAC;wCAAE,WAAU;;4CAA6B;4CAC7B,cAAc,IAAI;;;;;;;;;;;;;0CAMnC,6LAAC;;kDACC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,6LAAC;gDACC,OAAO;gDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gDAC1C,WAAU;gDACV,MAAK;gDACL,aAAY;gDACZ,WAAU;;;;;;0DAEZ,6LAAC;gDAAE,WAAU;;oDACV,QAAQ,MAAM;oDAAC;;;;;;;;;;;;;kDAIpB,6LAAC;wCACC,MAAK;wCACL,UAAU,aAAa,CAAC;wCACxB,WAAU;kDAET,0BACC,6LAAC;4CAAK,WAAU;;8DACd,6LAAC,iJAAA,CAAA,YAAS;oDAAC,WAAU;;;;;;gDAAsB;;;;;;mDAG7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlB;GA/MM;;QACwB,iIAAA,CAAA,UAAO;QACpB,qIAAA,CAAA,YAAS;;;KAFpB;uCAiNS","debugId":null}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}